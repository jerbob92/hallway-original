// curl http://static.firebase.com/v0/firebase-auth-server-node.js > firebase-auth-server.js
var k=!1,l=this;
function n(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==
b&&"undefined"==typeof a.call)return"object";return b}Math.floor(2147483648*Math.random()).toString(36);var aa={};function ba(){this.h=void 0}
function o(a,b,c){switch(typeof b){case "string":q(b,c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case "boolean":c.push(b);break;case "undefined":c.push("null");break;case "object":if(null==b){c.push("null");break}if("array"==n(b)){var d=b.length;c.push("[");for(var e="",f=0;f<d;f++)c.push(e),e=b[f],o(a,a.h?a.h.call(b,String(f),e):e,c),e=",";c.push("]");break}c.push("{");d="";for(f in b)Object.prototype.hasOwnProperty.call(b,f)&&(e=b[f],"function"!=typeof e&&(c.push(d),q(f,
c),c.push(":"),o(a,a.h?a.h.call(b,f,e):e,c),d=","));c.push("}");break;case "function":break;default:throw Error("Unknown type: "+typeof b);}}var r={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},ca=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;
function q(a,b){b.push('"',a.replace(ca,function(a){if(a in r)return r[a];var b=a.charCodeAt(0),e="\\u";16>b?e+="000":256>b?e+="00":4096>b&&(e+="0");return r[a]=e+b.toString(16)}),'"')};function s(a,b,c,d){var e;d<b?e="at least "+b:d>c&&(e=0===c?"none":"no more than "+c);if(e)throw Error(a+" failed: Was called with "+d+(1===d?" argument.":" arguments.")+" Expects "+e+".");}function u(a){var b="";switch(a){case 1:b="First";break;case 2:b="Second";break;case 3:b="Third";break;case 4:b="Fourth";break;default:aa.S.T.U.assert(k,"errorPrefix_ called with argumentNumber > 4.  Need to update it?")}return"new FirebaseAuthServer failed: "+(b+" argument ")};var v=Math,w={},x=w.o={};function y(){}
var z=x.q={extend:function(a){y.prototype=this;var b=new y;a&&b.O(a);b.p=this;return b},create:function(){var a=this.extend();a.g.apply(a,arguments);return a},g:function(){},O:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},c:function(){return this.p.extend(this)}},A=x.w=z.extend({g:function(a,b){a=this.b=a||[];this.a=void 0!=b?b:4*a.length},toString:function(a){return(a||da).stringify(this)},concat:function(a){var b=this.b,
c=a.b,d=this.a,a=a.a;this.I();if(d%4)for(var e=0;e<a;e++)b[d+e>>>2]|=(c[e>>>2]>>>24-8*(e%4)&255)<<24-8*((d+e)%4);else if(65535<c.length)for(e=0;e<a;e+=4)b[d+e>>>2]=c[e>>>2];else b.push.apply(b,c);this.a+=a;return this},I:function(){var a=this.b,b=this.a;a[b>>>2]&=4294967295<<32-8*(b%4);a.length=v.ceil(b/4)},c:function(){var a=z.c.call(this);a.b=this.b.slice(0);return a},random:function(a){for(var b=[],c=0;c<a;c+=4)b.push(4294967296*v.random()|0);return A.create(b,a)}}),B=w.L={},da=B.Q={stringify:function(a){for(var b=
a.b,a=a.a,c=[],d=0;d<a;d++){var e=b[d>>>2]>>>24-8*(d%4)&255;c.push((e>>>4).toString(16));c.push((e&15).toString(16))}return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;d<b;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-4*(d%8);return A.create(c,b/2)}},C=B.R={stringify:function(a){for(var b=a.b,a=a.a,c=[],d=0;d<a;d++)c.push(String.fromCharCode(b[d>>>2]>>>24-8*(d%4)&255));return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;d<b;d++)c[d>>>2]|=(a.charCodeAt(d)&255)<<24-8*(d%4);
return A.create(c,b)}},ea=B.v={stringify:function(a){try{return decodeURIComponent(escape(C.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data");}},parse:function(a){return C.parse(unescape(encodeURIComponent(a)))}},D=x.P=z.extend({reset:function(){this.e=A.create();this.j=0},k:function(a){"string"==typeof a&&(a=ea.parse(a));this.e.concat(a);this.j+=a.a},l:function(a){var b=this.e,c=b.b,d=b.a,e=this.n,f=d/(4*e),f=a?v.ceil(f):v.max((f|0)-this.G,0),a=f*e,d=v.min(4*a,d);if(a){for(var g=0;g<a;g+=
e)this.C(c,g);g=c.splice(0,a);b.a-=d}return A.create(g,d)},c:function(){var a=z.c.call(this);a.e=this.e.c();return a},G:0});x.s=D.extend({g:function(){this.reset()},reset:function(){D.reset.call(this);this.D()},update:function(a){this.k(a);this.l();return this},d:function(a){a&&this.k(a);this.B();return this.f},c:function(){var a=D.c.call(this);a.f=this.f.c();return a},n:16,z:function(a){return function(b,c){return a.create(c).d(b)}},A:function(a){return function(b,c){return fa.r.create(a,c).d(b)}}});
for(var fa=w.m={},E=Math,F=w.o,ga=F.w,F=F.s,G=w.m,H=[],I=[],J=2,K=0;64>K;){var L;a:{for(var ha=J,ia=E.sqrt(ha),M=2;M<=ia;M++)if(!(ha%M)){L=k;break a}L=!0}L&&(8>K&&(H[K]=4294967296*(E.pow(J,0.5)-(E.pow(J,0.5)|0))|0),I[K]=4294967296*(E.pow(J,1/3)-(E.pow(J,1/3)|0))|0,K++);J++}
var N=[],G=G.u=F.extend({D:function(){this.f=ga.create(H.slice(0))},C:function(a,b){for(var c=this.f.b,d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],i=c[5],t=c[6],P=c[7],j=0;64>j;j++){if(16>j)N[j]=a[b+j]|0;else{var m=N[j-15],p=N[j-2];N[j]=((m<<25|m>>>7)^(m<<14|m>>>18)^m>>>3)+N[j-7]+((p<<15|p>>>17)^(p<<13|p>>>19)^p>>>10)+N[j-16]}m=P+((h<<26|h>>>6)^(h<<21|h>>>11)^(h<<7|h>>>25))+(h&i^~h&t)+I[j]+N[j];p=((d<<30|d>>>2)^(d<<19|d>>>13)^(d<<10|d>>>22))+(d&e^d&f^e&f);P=t;t=i;i=h;h=g+m|0;g=f;f=e;e=d;d=m+p|0}c[0]=c[0]+
d|0;c[1]=c[1]+e|0;c[2]=c[2]+f|0;c[3]=c[3]+g|0;c[4]=c[4]+h|0;c[5]=c[5]+i|0;c[6]=c[6]+t|0;c[7]=c[7]+P|0},B:function(){var a=this.e,b=a.b,c=8*this.j,d=8*a.a;b[d>>>5]|=128<<24-d%32;b[(d+64>>>9<<4)+15]=c;a.a=4*b.length;this.l()}});w.u=F.z(G);w.t=F.A(G);var ja=w.L.v;
w.m.r=w.o.q.extend({g:function(a,b){a=this.i=a.create();"string"==typeof b&&(b=ja.parse(b));var c=a.n,d=4*c;b.a>d&&(b=a.d(b));for(var e=this.H=b.c(),f=this.F=b.c(),g=e.b,h=f.b,i=0;i<c;i++)g[i]^=1549556828,h[i]^=909522486;e.a=f.a=d;this.reset()},reset:function(){var a=this.i;a.reset();a.update(this.F)},update:function(a){this.i.update(a);return this},d:function(a){var b=this.i,a=b.d(a);b.reset();return b.d(this.H.c().concat(a))}});Math.random();var O,Q,R,S;function ka(){return l.navigator?l.navigator.userAgent:null}S=R=Q=O=k;var T;if(T=ka()){var la=l.navigator;O=0==T.indexOf("Opera");Q=!O&&-1!=T.indexOf("MSIE");R=!O&&-1!=T.indexOf("WebKit");S=!O&&!R&&"Gecko"==la.product}var ma=Q,na=S,oa=R;var U;if(O&&l.opera){var pa=l.opera.version;"function"==typeof pa&&pa()}else na?U=/rv\:([^\);]+)(\)|;)/:ma?U=/MSIE\s+([^\);]+)(\)|;)/:oa&&(U=/WebKit\/(\S+)/),U&&U.exec(ka());var V=null,W=null;
function qa(a){var b=n(a);if(!("array"==b||"object"==b&&"number"==typeof a.length))throw Error("encodeByteArray takes an array as a parameter");if(!V){V={};W={};for(b=0;65>b;b++)V[b]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(b),W[b]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(b)}for(var b=W,c=[],d=0;d<a.length;d+=3){var e=a[d],f=d+1<a.length,g=f?a[d+1]:0,h=d+2<a.length,i=h?a[d+2]:0,t=e>>2,e=(e&3)<<4|g>>4,g=(g&15)<<2|i>>6,i=i&63;h||(i=
64,f||(g=64));c.push(b[t],b[e],b[g],b[i])}return c.join("")};TOKEN_VERSION="0";function X(a,b){s("new FirebaseAuthServer",2,2,arguments.length);if("string"!=typeof a)throw Error(u(1)+"must be a valid firebase namespace.");if("string"!=typeof b)throw Error(u(2)+"must be a valid firebase namespace secret.");this.M=a;this.N=b}var Y=["FirebaseAuthServer"],Z=l;!(Y[0]in Z)&&Z.execScript&&Z.execScript("var "+Y[0]);for(var $;Y.length&&($=Y.shift());)!Y.length&&void 0!==X?Z[$]=X:Z=Z[$]?Z[$]:Z[$]={};module.exports=X;
X.prototype.J=function(){s("FirebaseAuthServer.createAdminAuthToken",0,0,arguments.length);return ra(this,"a","")};X.prototype.createAdminAuthToken=X.prototype.J;
X.prototype.K=function(a){s("FirebaseAuthServer.createAuthToken",1,1,arguments.length);var b;"undefined"!==typeof JSON&&void 0!==JSON.stringify?b=JSON.stringify(a):(b=[],o(new ba,a,b),b=b.join(""));for(var c=[],d=0,e=0;e<b.length;e++){var f=b.charCodeAt(e);128>f?c[d++]=f:(2048>f?c[d++]=f>>6|192:(c[d++]=f>>12|224,c[d++]=f>>6&63|128),c[d++]=f&63|128)}b=qa(c);return ra(this,"u",b)};X.prototype.createAuthToken=X.prototype.K;
function ra(a,b,c){for(var b=Math.floor((new Date).getTime()/1E3).toString(16)+"~"+b+"~"+c+"~",c=w.t(b,a.N).toString(),d=[],e=0;e<c.length;e+=2)d.push(parseInt(c.substr(e,2),16));c=qa(d);return TOKEN_VERSION+"~"+a.M+"~"+c+"~"+b};
